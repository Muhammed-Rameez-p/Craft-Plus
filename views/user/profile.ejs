<%- include('../user/partials/head.ejs') %>

<%- include('../user/partials/navigation.ejs') %>

<div class="mt-5" >
  <div class="pt-5">

  </div>
</div>
<section style="background-color: #eee ">
  <div  class="container py-5" >
    <div  class="row">
      <div class="col">
        <nav aria-label="breadcrumb" class="bg-light rounded-3 p-3 mb-4">
          <ol class="breadcrumb mb-0">
            <li class="breadcrumb-item active" aria-current="page">
              User Profile
            </li>
          </ol>
        </nav>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-4">
        <div class="card mb-4">
          <div class="card-body text-center">
            <img
              src="https://www.pngitem.com/pimgs/m/150-1503945_transparent-user-png-default-user-image-png-png.png"
              alt="Admin"
              class="rounded-circle"
              width="150"
            />
            <h5 class="my-3"><%= users.name %></h5>
            <p class="text-muted mb-1"><%= users.email %></p>
          </div>
        </div>
        <div class="card mt-3">
          <ul class="list-group list-group-flush">
            <li
              class="list-group-item d-flex justify-content-between align-items-center flex-wrap"
            ></li>
            <li
              class="list-group-item d-flex justify-content-between align-items-center flex-wrap"
            >
              <a class="btn btn-primary" target="__blank" href="/Orders"
                >View Orders</a
              >
            </li>

            <li
              class="list-group-item d-flex justify-content-between align-items-center flex-wrap"
            >
              <span class="text-secondary"></span>
            </li>
          </ul>
        </div>
      </div>
      <div class="col-lg-8">
        <div
          class="card card-body"
          style="background-color: rgb(220, 217, 217)"
        >
          <div class="card-body">
            <div class="row">
              <div class="col-sm-3">
                <p class="mb-0"> Name</p>
              </div>
              <div class="col-sm-9">
                <p class="text-muted mb-0"><%= users.name %></p>
              </div>
            </div>
            <hr />
            <div class="row">
              <div class="col-sm-3">
                <p class="mb-0">Email</p>
              </div>
              <div class="col-sm-9">
                <p class="text-muted mb-0"><%=users.email %></p>
              </div>
            </div>
            <hr />
            <div class="row">
              <div class="col-sm-3">
                <p class="mb-0">Phone</p>
              </div>
              <div class="col-sm-9">
                <p class="text-muted mb-0"><%= users.phone %></p>
              </div>
            </div>
            <hr />
            <div class="row">
              <div class="col-sm-3">
                <p class="mb-0">Address</p>
              </div>
              <% if (address ) { %>
              <div class="col-sm-9 text-secondary">Address added</div>
              <% } else { %>
              <div class="col-sm-9 text-secondary"></div>
              <% } %>
            </div>
            <hr />
            <div class="row">
              <div class="col-sm-12">
                <% if (address ) { %>
                <a class="btn btn-success" target="__blank" href="/addaddress"
                  >Add new address</a
                >
                <% } else { %>
                <a class="btn btn-success" target="__blank" href="/addaddress"
                  >Add address</a
                >
                <% } %>
                <a class="btn btn-info ml-4 " style="width: 100px ; font-size: 14px; " href="/editprofilepage?id=<%= users._id %>">Edit Profile</a>
              </div>
             
              <!-- <div class="row">
                <div class="col-sm-12">
                 
            
                </div>
              </div> -->

            </div>
          </div>
        </div>
        <div class="row">
          <% address.address.forEach(function (x) { %>
          <div class="col-md-6">
            <div class="card mb-4 mb-md-0">
              <div class="card-body">
                <p class="mb-4">
                  <span class="text-primary font-italic me-1">Address</span>
                  <%= index++ %>
                </p>
                <div class="text-center card-body p-0">
                  <ul class="list-group list-group-flush rounded-3">
                    <li
                      class="list-group-item d-flex justify-content-between align-items-center p-3"
                    >
                      <h6 class="mb-0"><%= x.fullName %></h6>
                      <span class="text-secondary">Fulll Name</span>
                    </li>
                    <li
                      class="list-group-item d-flex justify-content-between align-items-center p-3"
                    >
                      <h6 class="mb-0"><%= x.houseName %></h6>
                      <span class="text-secondary">House/Office</span>
                    </li>
                    <li
                      class="list-group-item d-flex justify-content-between align-items-center p-3"
                    >
                      <h6 class="mb-0"><%= x.city %></h6>
                      <span class="text-secondary">City</span>
                    </li>
                    <li
                      class="list-group-item d-flex justify-content-between align-items-center p-3"
                    >
                      <h6 class="mb-0"><%= x.state %></h6>
                      <span class="text-secondary">State</span>
                    </li>
                    <li
                      class="list-group-item d-flex justify-content-between align-items-center p-3"
                    >
                      <h6 class="mb-0"><%= x.pincode %></h6>
                      <span class="text-secondary">Pincode</span>
                    </li>
                    <li
                      class="list-group-item d-flex justify-content-between align-items-center p-3"
                    >
                      <h6 class="mb-0"><%= x.phone %></h6>
                      <span class="text-secondary">Phone</span>
                    </li>
                  </ul>
                  <form class="mt-2 " action="/deleteAddress/<%= x?._id %>" method="post">
                    <button
                      type="submit"
                      onclick="removeAddress('<%= x._id %>')"
                      class="btn btn-danger"
                    >
                      Remove
                    </button>

                  </form>
                    <div class="modal fade" id="edit<%= x._id %>" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                    aria-hidden="true">
                    <div class="modal-dialog" role="document">
                      <div class="modal-content">
                        <div class="modal-header text-center">
                          <h4 class="modal-title w-100 font-weight-bold">Update Address</h4>
                          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                          </button>
                        </div>
                        <div class="modal-body mx-3">
                          <form action="/edit-address/<%= x?._id %>" method="post">
                          <div class="md-form mb-5">
                            <i class="fas fa-user prefix grey-text"></i>
                            <input type="text"  name="fullName" value="<%= x.fullName %>" id="orangeForm-name" class="form-control validate">
                            <label data-error="wrong" data-success="right" for="orangeForm-name">Your name</label>
                          </div>
                          <div class="md-form mb-5">
                            <i class="fas fa-envelope prefix grey-text"></i>
                            <input type="text"  name="phone" value="<%= x.phone %>" id="orangeForm-email" class="form-control validate">
                            <label data-error="wrong" data-success="right" for="orangeForm-email"> phone No:</label>
                          </div>
                  
                          <div class="md-form mb-4">
                            <i class="fas fa-lock prefix grey-text"></i>
                            <input type="text"  name="houseName" value="<%= x.houseName %>" id="orangeForm-pass" class="form-control validate">
                            <label data-error="wrong" data-success="right" for="orangeForm-pass">House Name</label>
                          </div>

                          <div class="md-form mb-5">
                            <i class="fas fa-user prefix grey-text"></i>
                            <input type="text" name="city" value="<%= x.city %>" id="orangeForm-name" class="form-control validate">
                            <label data-error="wrong" data-success="right" for="orangeForm-name">City</label>
                          </div>
                          <div class="md-form mb-5">
                            <i class="fas fa-envelope prefix grey-text"></i>
                            <input type="text" name="pincode" value="<%= x.pincode %>" id="orangeForm-email" class="form-control validate">
                            <label data-error="wrong" data-success="right" for="orangeForm-email">Pincode</label>
                          </div>
                  
                          <div class="md-form mb-4">
                            <i class="fas fa-lock prefix grey-text"></i>
                            <input type="text" name="state" value="<%= x.state %>" id="orangeForm-pass" class="form-control validate">
                            <label data-error="wrong" data-success="right" for="orangeForm-pass">State</label>
                            <input type="text" name="userId" value="<%= user._id %>" hidden>
                          </div>
                  
                        </div>
                        <div class="modal-footer d-flex justify-content-center">
                          <button class="btn btn-deep-orange">Update Address</button>
                        </div>
                      </div>
                    </div>
                  </div>
                 
                  <div class="text-center">
                    <a href="" class="btn btn-default btn-rounded " data-toggle="modal" data-target="#edit<%= x._id %>">
                   <button class="btn btn-info"> Update Your Address</button>  
                    </a>
                  </div>
                </form>

                    <!-- <a class="btn btn-info ml-4 " style="width: 100px ; font-size: 14px; " href="/editAddresspage?id=<%= x._id %>">Edit Profile</a> -->
                 

                



                </div>
              </div>
            </div>
          </div>
          <% }) %>
        </div>
      </div>
    </div>
  </div>
</section>



<%- include('../user/partials/end.ejs') %>
